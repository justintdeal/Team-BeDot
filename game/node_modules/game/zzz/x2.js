
insp = require("util").inspect
log = console.log

function Thing(name) {
	var t = new Object()
	t.name = name

	var c = arguments.callee.caller
	while(c.name) {
		t.type = c.name
		c = c.caller
		log(t.type+"()...")
	}
	t.type = (t.type || "thing").toLowerCase()

	return t
}

function Treasure(name) {
	var t = new Thing(name)
	t.take = function() { log("taking a "+this.type+" named "+this.name) }
	return t
}

function Scroll(name) {
	var t = new Treasure(name)
	t.read = function() { log("reading a "+this.type+" named "+this.name) }
	return t
}

foo = function() {
	scroll = new Scroll("foonblot")
	gem = new Treasure("gem")
}
foo()

scroll.take()
scroll.read()

gem.take()


